# How to Set Up Local Perforce Server and Version Control
## 2025-11-01
### ![](https://raw.githubusercontent.com/DavidCai1874/my-tech-art-station-assets-storage-01/main/20251101170335.png)


**Note:** This is only a local pc setup tutorial, a multi-people setup will require some network knowledge and a wifi modem that you can log in to the gateway and setup the port forwarding. Unfortunately, at the time I write this doc, our team captain's modem is f**ked up, so there will only be a local server setup doc for now.

***

1\. Download P4D (the server): [https://portal.perforce.com/s/downloads?product=Helix%20Core%20%28P4D%29%20Server](https://portal.perforce.com/s/downloads?product=Helix%20Core%20%28P4D%29%20Server)

![](https://raw.githubusercontent.com/DavidCai1874/my-tech-art-station-assets-storage-01/main/20251101142514.png)

2\. It’s gonna ask u to provide some info, you can “optionally tell the true” here, or just skip

![](https://raw.githubusercontent.com/DavidCai1874/my-tech-art-station-assets-storage-01/main/20251101142721.png)

3\. Download P4V (the actual app), picture this as Sourcetree or Github Desktop: [https://portal.perforce.com/s/downloads?product=Helix%20Visual%20Client%20%28P4V%29](https://portal.perforce.com/s/downloads?product=Helix%20Visual%20Client%20%28P4V%29)

![](https://raw.githubusercontent.com/DavidCai1874/my-tech-art-station-assets-storage-01/main/20251101142913.png)

4\. In your downloads, you should see these two exes.

![](https://raw.githubusercontent.com/DavidCai1874/my-tech-art-station-assets-storage-01/main/20251101143021.png)

5\. **Install server first.**

![](https://raw.githubusercontent.com/DavidCai1874/my-tech-art-station-assets-storage-01/main/20251101143103.png)

6\. Keep others as default is fine, but go into File Explorer and **create this folder by hand.** We are going to create another folder in this path later.

![](https://raw.githubusercontent.com/DavidCai1874/my-tech-art-station-assets-storage-01/main/20251101143225.png)

7\. Like this.

![](https://raw.githubusercontent.com/DavidCai1874/my-tech-art-station-assets-storage-01/main/20251101143350.png)

8\. Next, leave the **Port Number as 1666** and **create a "P4ROOT" folder in the perforce path you just created.** Name doesn't matter, you can pick anything you want, like "data", "TheMatrix", or "my_cat_is_stepping_my_keyboahuiaschub." I keep it it as P4ROOT because the name matches. And set the **P4ROOT in Core Server's path to the folder you just created in Program Files > Perforce.** 

![](https://raw.githubusercontent.com/DavidCai1874/my-tech-art-station-assets-storage-01/main/20251101144142.png)

![](https://raw.githubusercontent.com/DavidCai1874/my-tech-art-station-assets-storage-01/main/20251101144200.png)

9\. In the next page, **change the first line to:**

**localhost:1666**

This means, “hey I’m running the server only on my local PC.” And for the Text Editing Application, leave it as notepad. You can also pick whatever you want as long as that app can deal with texts.

![](https://raw.githubusercontent.com/DavidCai1874/my-tech-art-station-assets-storage-01/main/20251101145203.png)

10\. Install server, and we will do P4V(the visual app) next.

![](https://raw.githubusercontent.com/DavidCai1874/my-tech-art-station-assets-storage-01/main/20251101145305.png)

11\. P4V is where mainly you will be dealing with files, checkout,and submit. Let's double-click the exe and start installation. **Leave everything as default.**

![](https://raw.githubusercontent.com/DavidCai1874/my-tech-art-station-assets-storage-01/main/20251101145444.png)

12\. Next page, it should automatically connected to the local server already.

![](https://raw.githubusercontent.com/DavidCai1874/my-tech-art-station-assets-storage-01/main/20251101145619.png)

13\. Now things are ready, install it.

![](https://raw.githubusercontent.com/DavidCai1874/my-tech-art-station-assets-storage-01/main/20251101145710.png)

14\.  Successfully installed, now **once you exit this,the P4V window will pop up.**

![](https://raw.githubusercontent.com/DavidCai1874/my-tech-art-station-assets-storage-01/main/20251101145756.png)


15\. In the popup window, hit "New..." and create a new user. You can optionally tell the truth.

![](https://raw.githubusercontent.com/DavidCai1874/my-tech-art-station-assets-storage-01/main/20251101150023.png)

![](https://raw.githubusercontent.com/DavidCai1874/my-tech-art-station-assets-storage-01/main/20251101150312.png)

16\. First time opening this, it will look scary. There will be two pop up windows asking you if you want to share your data, you can pick whatever you want.

![](https://raw.githubusercontent.com/DavidCai1874/my-tech-art-station-assets-storage-01/main/20251101150639.png)

17\. In the views, you can see all the windows you might need later
![](https://raw.githubusercontent.com/DavidCai1874/my-tech-art-station-assets-storage-01/main/20251101150721.png)

18\. Go into **Tools -> Administration.**

![](https://raw.githubusercontent.com/DavidCai1874/my-tech-art-station-assets-storage-01/main/20251101151003.png)

19\. It will pop up a window, this means you will have all the power to control things. **As you are the only user, click "Yes."**

![](https://raw.githubusercontent.com/DavidCai1874/my-tech-art-station-assets-storage-01/main/20251101150558.png)

20\. In the new **P4 Admim window, go to Depots.**

![](https://raw.githubusercontent.com/DavidCai1874/my-tech-art-station-assets-storage-01/main/20251101151728.png)

21\. **Delete** this existing default depot.

![](https://raw.githubusercontent.com/DavidCai1874/my-tech-art-station-assets-storage-01/main/20251101151925.png)

22\. **File -> New -> Depot** to create a new one.

![](https://raw.githubusercontent.com/DavidCai1874/my-tech-art-station-assets-storage-01/main/20251101151858.png)

23\. Name it whatever you want, this will be the place where you submit all your update to. Picture a Github repo but this one is in the P4ROOT folder we just created on our local PC.

![](https://raw.githubusercontent.com/DavidCai1874/my-tech-art-station-assets-storage-01/main/20251101152127.png)

24\. Since we are doing a local server, we can **set the depot type to local.**

![](https://raw.githubusercontent.com/DavidCai1874/my-tech-art-station-assets-storage-01/main/20251101152336.png)

25\. Now you can see, there's the new depot we just created.

![](https://raw.githubusercontent.com/DavidCai1874/my-tech-art-station-assets-storage-01/main/20251101152510.png)

26\. Open the cmd on your pc.

![](https://raw.githubusercontent.com/DavidCai1874/my-tech-art-station-assets-storage-01/main/20251101153229.png)

27\. Type in:

**p4 typemap**

and hit enter.

![](https://raw.githubusercontent.com/DavidCai1874/my-tech-art-station-assets-storage-01/main/20251101153257.png)

28\.  This is the step we setting up the typemap, which tells Perforce how to deal with different kinds of files. Unreal Engine has docs about this: [https://dev.epicgames.com/documentation/en-us/unreal-engine/using-perforce-as-source-control-for-unreal-engine](https://dev.epicgames.com/documentation/en-us/unreal-engine/using-perforce-as-source-control-for-unreal-engine). But **it is very unfriendly to these who uses notepad because it will create extra tabs** which is very annoying. Below is the UE typemap I fixed indent in VS Code, so you can choose to copy the text below and paste in the popup notepad window.

```
# Perforce File Type Mapping Specifications.
#
#  TypeMap:             a list of filetype mappings; one per line.
#                       Each line has two elements:
#
#                       Filetype: The filetype to use on 'p4 add'.
#
#                       Path:     File pattern which will use this filetype.
#
# See 'p4 help typemap' for more information.

TypeMap:
    binary+w //depot/....exe
    binary+w //depot/....dll
    binary+w //depot/....lib
    binary+w //depot/....app
    binary+w //depot/....dylib
    binary+w //depot/....stub
    binary+w //depot/....ipa
    binary //depot/....bmp
    text //depot/....ini
    text //depot/....config
    text //depot/....cpp
    text //depot/....h
    text //depot/....c
    text //depot/....cs
    text //depot/....m
    text //depot/....mm
    text //depot/....py
    binary+l //depot/....uasset
    binary+l //depot/....umap
    binary+l //depot/....upk
    binary+l //depot/....udk
    binary+l //depot/....ubulk
```

![](https://raw.githubusercontent.com/DavidCai1874/my-tech-art-station-assets-storage-01/main/20251101154016.png)

29\. Close the notepad window, and you should see this. Now you can **close this command window.**

![](https://raw.githubusercontent.com/DavidCai1874/my-tech-art-station-assets-storage-01/main/20251101154108.png)

30\. Go back to **P4V**, and go to **Connection -> Open Connection**.

![](https://raw.githubusercontent.com/DavidCai1874/my-tech-art-station-assets-storage-01/main/20251101154427.png)

31\.  **Create a new workspace**. Workspace means the folder of latest version of your project that you are working on and doing version control.

![](https://raw.githubusercontent.com/DavidCai1874/my-tech-art-station-assets-storage-01/main/20251101154643.png)

32\. **Name your workspace**, and select **the folder of your project on your pc** that you want to version control to the depot. And don't forget to **click on the depot**.

![](https://raw.githubusercontent.com/DavidCai1874/my-tech-art-station-assets-storage-01/main/20251101154900.png)

**IMPORTANT: if you don't want to checkout files everytime, check the "Allwrite" option in Advanced. Check this doc for details: [How to Configure Settings In P4V To Get the Best Single-User Experience](https://davidcai1874.github.io/my-tech-art-station/troubleshooting/pipeline/ts-p-0005)**

![](https://raw.githubusercontent.com/DavidCai1874/my-tech-art-station-assets-storage-01/main/20251105152640.png)


33\. It might ask you this if your folder isn't empty and wondering you want to pick another empty folder, **usually it's no.**

![](https://raw.githubusercontent.com/DavidCai1874/my-tech-art-station-assets-storage-01/main/20251101155503.png)

34\. Now you can just hit OK.

![](https://raw.githubusercontent.com/DavidCai1874/my-tech-art-station-assets-storage-01/main/20251101155527.png)

35\. This window might pop up, you can just hit cancel.

![](https://raw.githubusercontent.com/DavidCai1874/my-tech-art-station-assets-storage-01/main/20251101155647.png)

36\. Now it should be the depot we justy created here.

![](https://raw.githubusercontent.com/DavidCai1874/my-tech-art-station-assets-storage-01/main/20251101155709.png)

37\. And our workspace should be the project folder you just selected.

![](https://raw.githubusercontent.com/DavidCai1874/my-tech-art-station-assets-storage-01/main/20251101160003.png)

38\. Next we are going to **setup a .p4ignore file**. It ignores all the uncessary folders for version control. I will do it for my UE project. Right click at the empty space in the project folder and **create a text document**.

![](https://raw.githubusercontent.com/DavidCai1874/my-tech-art-station-assets-storage-01/main/20251101162417.png)

39\. Rename the whole thing to 

**.p4ignore**

including the suffix. 

![](https://raw.githubusercontent.com/DavidCai1874/my-tech-art-station-assets-storage-01/main/20251101162610.png)

40\. Click Yes for this warning.

![](https://raw.githubusercontent.com/DavidCai1874/my-tech-art-station-assets-storage-01/main/20251101162643.png)

41\. Same as the typemap, we need to paste in some text, and Unreal Engine's documentation on this is bad. There might be an update of Perforce recently causing many p4ignore online doesn't not work. I found this forum online, copied the p4ignore in there and fixed it. Take a look at the forum if you're interested: [https://forums.unrealengine.com/t/best-p4ignore-for-populating-perforce-with-ue4-engine-source/555073](https://forums.unrealengine.com/t/best-p4ignore-for-populating-perforce-with-ue4-engine-source/555073). The version of p4ignore I use is below, **copy this:**

```
# Unreal Engine build/temp files
Intermediate/
Saved/
DerivedDataCache/
Build/

# Resource source files (large or unnecessary assets)
obj/
fbx/
psd/
tga/
```

42\. **Open your .p4ignore file and paste the text in.** Save it

![](https://raw.githubusercontent.com/DavidCai1874/my-tech-art-station-assets-storage-01/main/20251101163549.png)

43\. Open Command Prompt again, and type in this line:

**p4 set P4IGNORE=.p4ignore**

This tells Perforce that this is the ignore file it needs to look for.

![](https://raw.githubusercontent.com/DavidCai1874/my-tech-art-station-assets-storage-01/main/20251101163904.png)

44\. Now let's go back to P4V, and selecte this p4ignore file. Hit Add. This step is somehow extra since the file itself should work, but just in case let's submit it to our depot first.

![](https://raw.githubusercontent.com/DavidCai1874/my-tech-art-station-assets-storage-01/main/20251101165720.png)

45\. This popup window is asking you which changelist you want to put the change in. We can just leave it as default and check the "Don't show this dialog again" since it's local setup, things can be casual.

![](https://raw.githubusercontent.com/DavidCai1874/my-tech-art-station-assets-storage-01/main/20251101165857.png)

46\. Now the pending list should be red, click on that.

![](https://raw.githubusercontent.com/DavidCai1874/my-tech-art-station-assets-storage-01/main/20251101170042.png)

47\. Then, submit the change. 

![](https://raw.githubusercontent.com/DavidCai1874/my-tech-art-station-assets-storage-01/main/20251101170120.png)

48\. You'll need to write a discription of what changes you made this time. Then hit submit.

![](https://raw.githubusercontent.com/DavidCai1874/my-tech-art-station-assets-storage-01/main/20251101170220.png)

49\. Wer should be able to see that in the depot.

![](https://raw.githubusercontent.com/DavidCai1874/my-tech-art-station-assets-storage-01/main/20251101170335.png)

50\. Do the same thing again for the whole folder. How perforce works is everytime you need to select the whole folder, add changes, and submit. Pretty straightforward for local setup.

![](https://raw.githubusercontent.com/DavidCai1874/my-tech-art-station-assets-storage-01/main/20251101170813.png)

If theres a window like this, it means your p4ignore is working. A good sign.

![](https://raw.githubusercontent.com/DavidCai1874/my-tech-art-station-assets-storage-01/main/20251101170630.png)

